<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GRIM - An Undertale-style RPG game">
    <title>GRIM</title>
    <link rel="icon" type="image/png" href="Grimgame/UI Battle/Soul/spr_heart_0.png">
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/menu.css">
    <link rel="stylesheet" href="src/css/battle.css">
    
    <!-- Preload critical assets -->
    <link rel="preload" as="font" href="Grimgame/determination-mono-web-font/DeterminationMonoWebRegular-Z5oq.ttf" type="font/ttf" crossorigin="anonymous">
    <link rel="preload" as="image" href="Grimgame/UI Battle/Soul/spr_heart_0.png">
    <link rel="preload" as="audio" href="Grimgame/assets/audio/sfx/menu_select.wav">
    <link rel="preload" as="audio" href="Grimgame/assets/audio/sfx/menu_move.wav">
</head>
<body>
    <!-- Error Screen -->
    <div id="error-screen" class="hidden">
        <div class="error-content">
            <h1>Error</h1>
            <p>An error occurred while loading the game.</p>
            <p class="error-details"></p>
            <button onclick="location.reload()">Retry</button>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <h1>Loading GRIM...</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div id="game-container">
        <!-- Soul Cursor -->
        <div id="soul-cursor" class="soul-cursor"></div>

        <!-- Game Canvas -->
        <canvas id="game-canvas"></canvas>

        <!-- Main Menu -->
        <div id="main-menu" class="hidden">
            <h1 class="menu-title">GRIM</h1>
            <div id="menu-items">
                <div class="menu-item">Continue</div>
                <div class="menu-item">New Game</div>
                <div class="menu-item">Settings</div>
                <div class="menu-item">Credits</div>
                <div class="menu-item">Extras</div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="hidden">
            <canvas id="game-canvas"></canvas>
            
            <!-- Dialogue Box -->
            <div id="dialogue-box" class="hidden">
                <div id="dialogue-text"></div>
            </div>
            
            <!-- Battle UI -->
            <div id="battle-ui" class="hidden">
                <!-- Enemy Info -->
                <div class="entity-info">
                    <div id="enemy-name">ENEMY</div>
                    <div class="hp-bar">
                        <div id="enemy-hp"></div>
                    </div>
                </div>
                
                <!-- Player Info -->
                <div class="entity-info">
                    <div class="name">GRIM</div>
                    <div class="hp-bar">
                        <div id="player-hp"></div>
                        <div class="hp-text">
                            <span id="current-hp">20</span> / <span id="max-hp">20</span>
                        </div>
                    </div>
                </div>
                
                <!-- Battle Menu -->
                <div id="battle-menu">
                    <div id="action-menu">
                        <div class="menu-item" data-action="fight">FIGHT</div>
                        <div class="menu-item" data-action="act">ACT</div>
                        <div class="menu-item" data-action="item">ITEM</div>
                        <div class="menu-item" data-action="mercy">MERCY</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Settings Screen -->
                <!-- Settings Screen -->
        <div id="settings-screen" class="hidden">
            <h2 class="menu-title">SETTINGS</h2>
            <div id="settings-items" class="menu-items">
                <div class="option-group">
                    <div class="menu-item">Master Volume</div>
                    <input type="range" id="master-volume" min="0" max="100" value="100">
                </div>
                <div class="option-group">
                    <div class="menu-item">Music Volume</div>
                    <input type="range" id="music-volume" min="0" max="100" value="70">
                </div>
                <div class="option-group">
                    <div class="menu-item">Sound Volume</div>
                    <input type="range" id="sfx-volume" min="0" max="100" value="80">
                </div>
                <div class="menu-item">Back</div>
            </div>
        </div>

        <!-- Credits Screen -->
        <div id="credits-screen" class="hidden">
            <h2 class="menu-title">CREDITS</h2>
            <div id="menu-items">
                <div class="credits-content">
                    <!-- Credits content will be populated by JavaScript -->
                </div>
                <div class="menu-item">Back</div>
            </div>
        </div>

        <!-- Extras Screen -->
        <div id="extras-screen" class="hidden">
            <h2 class="menu-title">EXTRAS</h2>
            <div id="menu-items">
                <div class="menu-item">Character Files</div>
                <div class="menu-item">Back</div>
            </div>
        </div>

        <!-- Character Files Screen -->
        <div id="character-files-screen" class="hidden">
            <h2 class="menu-title">CHARACTER FILES</h2>
            <div id="menu-items">
                <!-- Character files will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Debug panel (hidden by default) -->
    <div id="debug-panel" class="hidden">
        <div class="debug-content">
            <h3>Debug Info</h3>
            <div class="debug-stats">
                <p>FPS: <span id="debug-fps">60</span></p>
                <p>Memory: <span id="debug-memory">0 MB</span></p>
                <p>Entities: <span id="debug-entities">0</span></p>
            </div>
            <div class="debug-controls">
                <label><input type="checkbox" id="debug-colliders"> Show Colliders</label>
                <label><input type="checkbox" id="debug-fps-display"> Show FPS</label>
                <button id="debug-reload">Reload Assets</button>
            </div>
        </div>
    </div>
    
    <!-- Load game scripts -->
    <script type="module" src="src/js/config.js"></script>
    <script type="module" src="src/js/engine/GameEngine.js"></script>
    <script type="module" src="src/js/main.js"></script>
</body>
</html>